openapi: 3.0.0
info:
  title: User Atom API
  version: v1
servers:
  - url: /api
paths:
  /v1/auth/login:
    post:
      summary: User login
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                email: {type: string}
                password: {type: string}
      responses:
        '200': {description: OK}
  /v1/auth/validate:
    post:
      summary: Validate JWT token
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                token: {type: string}
      responses:
        '200': {description: OK}
  /v1/users:
    get:
      summary: List users with pagination, search, and filters
      parameters:
        - in: query
          name: q
          schema: {type: string}
        - in: query
          name: role_id
          schema: {type: integer}
        - in: query
          name: is_active
          schema: {type: integer}
        - in: query
          name: per_page
          schema: {type: integer}
      responses:
        '200': {description: OK}
    post:
      summary: Create user
      requestBody:
        required: true
        content:
          application/json:
            schema:
              type: object
              properties:
                name: {type: string}
                email: {type: string}
                password: {type: string}
                role_id: {type: integer}
                is_active: {type: boolean}
      responses:
        '200': {description: Created}
  /v1/users/{id}:
    get:
      summary: Show single user
      parameters:
        - in: path
          name: id
          required: true
          schema: {type: integer}
      responses:
        '200': {description: OK}
    put:
      summary: Update user
      parameters:
        - in: path
          name: id
          required: true
          schema: {type: integer}
      responses:
        '200': {description: OK}
    delete:
      summary: Soft delete user
      parameters:
        - in: path
          name: id
          required: true
          schema: {type: integer}
      responses:
        '200': {description: Deleted}
  /v1/users/{id}/assign-category:
    post:
      summary: Assign user to category/subcategory
      parameters:
        - in: path
          name: id
          required: true
          schema: {type: integer}
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                category_id: {type: integer}
                subcategory_id: {type: integer}
      responses:
        '200': {description: Assigned}
  /v1/roles:
    get:
      summary: List roles
      responses:
        '200': {description: OK}
    post:
      summary: Create role
      requestBody:
        content:
          application/json:
            schema:
              type: object
              properties:
                name: {type: string}
                slug: {type: string}
                description: {type: string}
      responses:
        '200': {description: Created}
  /v1/roles/{id}:
    get:
      summary: Show single role
      parameters:
        - in: path
          name: id
          required: true
          schema: {type: integer}
      responses:
        '200': {description: OK}
components: {}
